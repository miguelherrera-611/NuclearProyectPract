<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vacantes Disponibles - Portal Estudiantes</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS para Estudiantes -->
    <style>
        :root {
            --estudiante-primary: #28a745;
            --estudiante-secondary: #20c997;
            --estudiante-dark: #155724;
        }

        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Navbar personalizada para estudiantes */
        .navbar-estudiante {
            background: linear-gradient(135deg, var(--estudiante-primary) 0%, var(--estudiante-secondary) 100%);
        }

        .sidebar {
            min-height: calc(100vh - 56px);
            background-color: #fff;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            padding: 0;
        }

        .sidebar .list-group-item {
            border: none;
            border-left: 3px solid transparent;
            transition: all 0.3s;
        }

        .sidebar .list-group-item:hover {
            background-color: #f8f9fa;
            border-left-color: var(--estudiante-primary);
            padding-left: 1.5rem;
        }

        .sidebar .list-group-item.active {
            background-color: #e7f5ea;
            color: var(--estudiante-dark);
            border-left-color: var(--estudiante-primary);
            font-weight: 600;
        }

        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .badge-estado {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .badge-apto {
            background-color: #d4edda;
            color: #155724;
        }

        .badge-no-apto {
            background-color: #f8d7da;
            color: #721c24;
        }

        .badge-en-practica {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .badge-finalizado {
            background-color: #d6d8db;
            color: #383d41;
        }

        .stat-card {
            border-left: 4px solid var(--estudiante-primary);
        }

        .btn-estudiante {
            background-color: var(--estudiante-primary);
            border-color: var(--estudiante-primary);
            color: white;
        }

        .btn-estudiante:hover {
            background-color: var(--estudiante-dark);
            border-color: var(--estudiante-dark);
            color: white;
        }
    </style>

    
</head>
<body>
    
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-estudiante">
    <div class="container-fluid">
        <a class="navbar-brand" href="/estudiante/dashboard/">
            <i class="fas fa-user-graduate me-2"></i>
            Portal Estudiantes
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/estudiante/dashboard/">
                        <i class="fas fa-home me-1"></i>Dashboard
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-user-circle me-1"></i>
                        Mi Cuenta
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <a class="dropdown-item" href="/estudiante/perfil/">
                                <i class="fas fa-user-edit me-2"></i>Mi Perfil
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item text-danger" href="/estudiante/logout/">
                                <i class="fas fa-sign-out-alt me-2"></i>Cerrar Sesión
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Main Content -->
<div class="container-fluid mt-4">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 col-lg-2 sidebar">
            <div class="list-group">
                <a href="/estudiante/dashboard/" class="list-group-item list-group-item-action">
                    <i class="fas fa-home me-2"></i>Dashboard
                </a>
                <a href="/estudiante/perfil/" class="list-group-item list-group-item-action">
                    <i class="fas fa-user-edit me-2"></i>Mi Perfil
                </a>
                <a href="/estudiante/vacantes/" class="list-group-item list-group-item-action active">
                    <i class="fas fa-briefcase me-2"></i>Vacantes Disponibles
                </a>
                <a href="/estudiante/postulaciones/" class="list-group-item list-group-item-action">
                    <i class="fas fa-clipboard-list me-2"></i>Mis Postulaciones
                </a>
            </div>
        </div>

        <!-- Main Area -->
        <div class="col-md-9 col-lg-10">
            <div id="vacantes-react-root"></div>
        </div>
    </div>
</div>

<script type="text/babel">
    const { useState, useEffect } = React;

    function VacantesApp() {
        const vacantesData = [{"id": 10, "titulo": "RF Vacante", "area_practica": "Dev", "descripcion": "D", "cantidad_cupos": 2, "cupos_ocupados": 0, "cupos_disponibles": 2, "programa_academico": "Ingenieria", "semestre_minimo": 4, "horario": "D", "duracion_meses": 6, "estado": "DISPONIBLE", "fecha_creacion": "2025-11-21T19:21:39.412972+00:00", "fecha_publicacion": "2025-11-21T19:21:39.410392+00:00", "empresa": {"id": 8, "razon_social": "RF Empresa", "nit": "RF001"}, "creada_por": "RF Coord", "cumple_requisitos": true, "ya_postulado": true}, {"id": 9, "titulo": "Vacante Prueba", "area_practica": "Desarrollo", "descripcion": "Descripcion prueba", "cantidad_cupos": 2, "cupos_ocupados": 0, "cupos_disponibles": 2, "programa_academico": "Ingenieria", "semestre_minimo": 4, "horario": "Diurno", "duracion_meses": 6, "estado": "DISPONIBLE", "fecha_creacion": "2025-11-21T19:19:54.885753+00:00", "fecha_publicacion": "2025-11-21T19:19:54.883351+00:00", "empresa": {"id": 7, "razon_social": "Empresa Prueba", "nit": "0001"}, "creada_por": "Coord Prueba", "cumple_requisitos": true, "ya_postulado": false}, {"id": 6, "titulo": "Practicante de Ingenier\u00eda Industrial - Marketing Digital Gr", "area_practica": "An\u00e1lisis de Datos", "descripcion": "Apoyo en proyectos del \u00e1rea de An\u00e1lisis de Datos. Se requiere estudiante proactivo con ganas de aprender.", "cantidad_cupos": 2, "cupos_ocupados": 0, "cupos_disponibles": 2, "programa_academico": "Ingenier\u00eda Industrial", "semestre_minimo": 8, "horario": "Lunes a Viernes 8:00am - 5:00pm", "duracion_meses": 6, "estado": "DISPONIBLE", "fecha_creacion": "2025-11-04T23:10:29.634977+00:00", "fecha_publicacion": "2025-11-04T23:10:29.633840+00:00", "empresa": {"id": 5, "razon_social": "Marketing Digital Group", "nit": "900567890-5"}, "creada_por": "Mar\u00eda Gonz\u00e1lez", "cumple_requisitos": false, "ya_postulado": false}, {"id": 3, "titulo": "Practicante de Ingenier\u00eda de Sistemas - Software Development", "area_practica": "Desarrollo de Software", "descripcion": "Apoyo en proyectos del \u00e1rea de Desarrollo de Software. Se requiere estudiante proactivo con ganas de aprender.", "cantidad_cupos": 1, "cupos_ocupados": 0, "cupos_disponibles": 1, "programa_academico": "Ingenier\u00eda de Sistemas", "semestre_minimo": 6, "horario": "Lunes a Viernes 8:00am - 5:00pm", "duracion_meses": 6, "estado": "DISPONIBLE", "fecha_creacion": "2025-11-04T23:10:29.595810+00:00", "fecha_publicacion": "2025-11-04T23:10:29.594732+00:00", "empresa": {"id": 4, "razon_social": "Software Development Inc", "nit": "900456789-4"}, "creada_por": "Mar\u00eda Gonz\u00e1lez", "cumple_requisitos": false, "ya_postulado": false}, {"id": 1, "titulo": "Practicante de Ingenier\u00eda de Sistemas - Tech Solutions SAS", "area_practica": "Desarrollo de Software", "descripcion": "Apoyo en proyectos del \u00e1rea de Desarrollo de Software. Se requiere estudiante proactivo con ganas de aprender.", "cantidad_cupos": 3, "cupos_ocupados": 1, "cupos_disponibles": 2, "programa_academico": "Ingenier\u00eda de Sistemas", "semestre_minimo": 7, "horario": "Lunes a Viernes 8:00am - 5:00pm", "duracion_meses": 6, "estado": "DISPONIBLE", "fecha_creacion": "2025-11-04T23:10:29.570853+00:00", "fecha_publicacion": "2025-11-04T23:10:29.568558+00:00", "empresa": {"id": 1, "razon_social": "Tech Solutions SAS", "nit": "900123456-1"}, "creada_por": "Mar\u00eda Gonz\u00e1lez", "cumple_requisitos": false, "ya_postulado": false}];
        const programaEstudiante = "Ingenieria";
        const [vacantes, setVacantes] = useState(vacantesData);
        const [filtroPrograma, setFiltroPrograma] = useState("");
        const [busqueda, setBusqueda] = useState("");

        // Filtrar vacantes localmente
        const filtrarVacantes = () => {
            let resultado = vacantesData;

            if (filtroPrograma === 'mi_programa') {
                resultado = resultado.filter(v => 
                    v.programa_academico.toLowerCase().includes(programaEstudiante.toLowerCase())
                );
            }

            if (busqueda) {
                resultado = resultado.filter(v =>
                    v.titulo.toLowerCase().includes(busqueda.toLowerCase()) ||
                    v.area_practica.toLowerCase().includes(busqueda.toLowerCase()) ||
                    v.empresa.razon_social.toLowerCase().includes(busqueda.toLowerCase())
                );
            }

            setVacantes(resultado);
        };

        useEffect(() => {
            filtrarVacantes();
        }, [filtroPrograma, busqueda]);

        return (
            <div>
                {/* Header */}
                <div className="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h2>
                            <i className="fas fa-briefcase me-2 text-success"></i>
                            Vacantes Disponibles
                        </h2>
                        <p className="text-muted mb-0">
                            Explora las oportunidades de práctica empresarial
                        </p>
                    </div>
                    <div>
                        <span className="badge bg-success fs-6">
                            {vacantes.length} vacante{vacantes.length !== 1 ? 's' : ''} disponible{vacantes.length !== 1 ? 's' : ''}
                        </span>
                    </div>
                </div>

                {/* Alerta Informativa */}
                <div className="alert alert-info border-start border-5 border-info mb-4" role="alert">
                    <h5 className="alert-heading">
                        <i className="fas fa-info-circle me-2"></i>
                        Importante
                    </h5>
                    <p className="mb-0">
                        Estas vacantes son solo para consulta.
                        <strong>La Coordinación Empresarial</strong> es quien realiza las postulaciones oficiales 
                        después de evaluar tu perfil y la compatibilidad con las empresas.
                    </p>
                </div>

                {/* Filtros */}
                <FiltrosVacantes 
                    filtroPrograma={filtroPrograma}
                    setFiltroPrograma={setFiltroPrograma}
                    busqueda={busqueda}
                    setBusqueda={setBusqueda}
                    programaEstudiante={programaEstudiante}
                />

                {/* Lista de Vacantes */}
                {vacantes.length > 0 ? (
                    <div className="row g-4">
                        {vacantes.map(vacante => (
                            <VacanteCard key={vacante.id} vacante={vacante} />
                        ))}
                    </div>
                ) : (
                    <div className="alert alert-warning text-center py-5">
                        <i className="fas fa-search fa-3x mb-3 text-muted"></i>
                        <h4>No se encontraron vacantes</h4>
                        <p className="mb-0">
                            Intenta ajustar los filtros de búsqueda
                        </p>
                    </div>
                )}
            </div>
        );
    }

    // ==========================================
    // COMPONENTE: Filtros
    // ==========================================
    function FiltrosVacantes({ filtroPrograma, setFiltroPrograma, busqueda, setBusqueda, programaEstudiante }) {
        return (
            <div className="card mb-4">
                <div className="card-body">
                    <div className="row g-3">
                        <div className="col-md-6">
                            <label className="form-label fw-bold">
                                <i className="fas fa-filter me-2"></i>Filtrar por Programa
                            </label>
                            <select 
                                className="form-select"
                                value={filtroPrograma}
                                onChange={(e) => setFiltroPrograma(e.target.value)}
                            >
                                <option value="">Todos los programas</option>
                                <option value="mi_programa">
                                    Mi programa ({programaEstudiante})
                                </option>
                            </select>
                        </div>

                        <div className="col-md-6">
                            <label className="form-label fw-bold">
                                <i className="fas fa-search me-2"></i>Buscar
                            </label>
                            <input
                                type="text"
                                className="form-control"
                                placeholder="Buscar por título, empresa o área..."
                                value={busqueda}
                                onChange={(e) => setBusqueda(e.target.value)}
                            />
                        </div>
                    </div>
                </div>
            </div>
        );
    }

    // ==========================================
    // COMPONENTE: Card de Vacante
    // ==========================================
    function VacanteCard({ vacante }) {
        return (
            <div className="col-md-6 col-lg-4">
                <div className="card h-100 hover-shadow">
                    <div className="card-body d-flex flex-column">
                        {/* Empresa y Estado */}
                        <div className="d-flex justify-content-between align-items-start mb-3">
                            <div className="flex-grow-1">
                                <h6 className="text-muted mb-1 small">
                                    <i className="fas fa-building me-1"></i>
                                    {vacante.empresa.razon_social}
                                </h6>
                            </div>
                            {vacante.ya_postulado && (
                                <span className="badge bg-info">
                                    <i className="fas fa-check me-1"></i>Postulado
                                </span>
                            )}
                        </div>

                        {/* Título */}
                        <h5 className="card-title mb-3">
                            {vacante.titulo}
                        </h5>

                        {/* Área */}
                        <p className="text-muted small mb-2">
                            <i className="fas fa-briefcase me-2 text-success"></i>
                            <strong>Área:</strong> {vacante.area_practica}
                        </p>

                        {/* Programa */}
                        <p className="text-muted small mb-2">
                            <i className="fas fa-graduation-cap me-2 text-primary"></i>
                            <strong>Programa:</strong> {vacante.programa_academico}
                        </p>

                        {/* Semestre Mínimo */}
                        <p className="text-muted small mb-2">
                            <i className="fas fa-calendar-alt me-2 text-warning"></i>
                            <strong>Semestre mínimo:</strong> {vacante.semestre_minimo}°
                        </p>

                        {/* Duración */}
                        <p className="text-muted small mb-3">
                            <i className="fas fa-clock me-2 text-info"></i>
                            <strong>Duración:</strong> {vacante.duracion_meses} meses
                        </p>

                        {/* Indicador de Requisitos */}
                        {vacante.cumple_requisitos ? (
                            <div className="alert alert-success py-2 px-3 mb-3 small">
                                <i className="fas fa-check-circle me-2"></i>
                                Cumples los requisitos
                            </div>
                        ) : (
                            <div className="alert alert-warning py-2 px-3 mb-3 small">
                                <i className="fas fa-exclamation-triangle me-2"></i>
                                No cumples todos los requisitos
                            </div>
                        )}

                        {/* Footer con Cupos y Botón */}
                        <div className="mt-auto">
                            <div className="d-flex justify-content-between align-items-center">
                                <span className="badge bg-success">
                                    {vacante.cupos_disponibles} cupo{vacante.cupos_disponibles !== 1 ? 's' : ''}
                                </span>
                                <a 
                                    href={`/estudiante/vacantes/0/`.replace('0', vacante.id)}
                                    className="btn btn-sm btn-outline-success"
                                >
                                    Ver Detalle <i className="fas fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );
    }

    // Renderizar
    const root = ReactDOM.createRoot(document.getElementById('vacantes-react-root'));
    root.render(<VacantesApp />);
</script>

<style>
    .hover-shadow {
        transition: all 0.3s ease;
    }

    .hover-shadow:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.15);
    }
</style>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- React (CDN para desarrollo) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    
</body>
</html>

